@using DisciplinarySystem.Application.Helpers
@using DisciplinarySystem.Presentation.Models
@model DisciplinarySystem.Presentation.Controllers.PrimaryVotes.ViewModels.GetAllPrimaryVotes


@section Styles{
	<link href="~/css/persianDateTime/kendo.common.min.css" rel="stylesheet" />
	<link href="~/css/persianDateTime/kendo.default.min.css" rel="stylesheet" />
	<link href="~/css/persianDateTime/custom.input.css" rel="stylesheet" />
}


	@{
	var steps = new CaseSteps { CaseId = Model.Filters.CaseId, ActiveStep = "PrimaryVote", OnlySee = Model.Filters.OnlySee };
	<partial name="_CaseStepsPartial" model="@steps" />
}

<div class="d-flex align-items-center justify-content-end mb-2">
	@if (Model.PrimaryVotes.Count() == 0 && !Model.Filters.OnlySee)
	{
		<a asp-action="Create" asp-route-caseId="@Model.Filters.CaseId" class="btn btn--add d-flex align-items-center">
			<i class="fa fa-plus ms-2"></i>افزودن رای اولیه
			جدید
		</a>
	}
</div>

<form method="get">
	<partial name="_FilterPartial" model="@Model.Filters" />
	<div class="table-overflow card shadow-sm">
		<div class="table ">
			<table class="table text-center" width="100%">
				<thead>
					<tr>
						<th>تخلف</th>
						<th>حکم</th>
						<th>تاریخ ایجاد</th>
						<th>عملیات</th>
					</tr>
				</thead>
				<tbody>
					@for (int i = 0; i < Model.PrimaryVotes.Count(); i++)
					{
						<tr>
							<td>@Model.PrimaryVotes.ElementAt(i).Violation.Title</td>
							<td>@Model.PrimaryVotes.ElementAt(i).Verdict.Title</td>
							<td>@Model.PrimaryVotes.ElementAt(i).CreateTime.ToShamsi()</td>
							<td>
								<div class="table__action">
									<a class="btn btn--show" asp-action="Details" asp-route-id="@Model.PrimaryVotes.ElementAt(i).Id"><i class="fa fa-eye"></i></a>
									@if (!Model.Filters.OnlySee)
									{
										<a class="btn btn--edit" asp-action="Update" asp-route-id="@Model.PrimaryVotes.ElementAt(i).Id"><i class="fa fa-edit"></i></a>
										<button type="button" class="btn btn--delete me-2" onclick="Delete('/PrimaryVote/Remove?id=@Model.PrimaryVotes.ElementAt(i).Id&caseId=@Model.Filters.CaseId' , 'رای اولیه')"><i class="fa fa-trash"></i></button>
									}
								</div>
							</td>
						</tr>
					}
				</tbody>
			</table>
		</div>
	</div>

</form>
@section Scripts{
	<script src="~/js/utility/removeAlert.js"></script>
}