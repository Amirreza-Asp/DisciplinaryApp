@model DisciplinarySystem.Presentation.Controllers.Complaints.ViewModels.ComplaintDetailsVM
@using DisciplinarySystem.Application.Helpers;
@using DisciplinarySystem.Presentation.Models

@if (Model.CaseId > 0)
{
	var step = new CaseSteps
				{
					ActiveStep = "Complaint",
					CaseId = Model.CaseId,
					OnlySee = true
				};

	<partial name="_CaseStepsPartial" model="step" />

}

<div class="d-flex justify-content-end mb-3">
	<button type="button" onclick="history.back()" class="btn btn-secondary d-flex align-items-center">
		بازگشت
		<i class="fa fa-angle-left me-2"></i>
	</button>
</div>

<div class="d-flex flex-column flex-sm-row align-items-sm-center  justify-content-between mb-2">
	<h3 class="mb-sm-0 mb-4">مشاهده شکایت</h3>
	<div class="d-flex flex-column flex-sm-row gap-2">
		<div class="mb-3">
			<label class="form-label">شماره شکواییه:</label>
			<input type="text" asp-for="Complaint.Id" class="form-control"
				   readonly>
		</div>
		<div class="mb-3">
			<label class="form-label">تاریخ ثبت:</label>
			<input type="text" value="@Model.Complaint.CreateDate.ToShamsi()" class="form-control" readonly>
		</div>
	</div>
</div>


<section class="card">
	<div>
		<h4 class="mt-4">مشخصات شاکی:</h4>
		<div class="row">
			<div class="mb-3 col-md-4">
				<label class="form-label">نام و نام خانوادگی:</label>
				<input type="text" asp-for="Complaint.Plaintiff.FullName" class="form-control" readonly>
			</div>
			<div class="mb-3 col-md-4">
				<label class="form-label">شماره تماس:</label>
				<input type="number" value="@Model.Complaint.Plaintiff.PhoneNumber.Value" class="form-control" readonly>
			</div>
			<div class="mb-3 col-md-4">
				<label class="form-label">کد ملی:</label>
				<input type="number" value="@Model.Complaint.Plaintiff.NationalCode.Value" class="form-control" readonly />
			</div>
			<div class="mb-3 col-12">
				<label class="form-label">ادرس:</label>
				<input type="text" asp-for="Complaint.Plaintiff.Address" class="form-control" readonly>
			</div>
		</div>
	</div>
	<div>
		<h4 class="mt-4">مشخصات متشاکی:</h4>
		<div class="row">
			<div class="mb-3 col-md-4">
				<label class="form-label">نام و نام خانوادگی:</label>
				<input type="text" asp-for="Complaint.Complaining.FullName" class="form-control" id="complaint-fullName" readonly>
			</div>
			<div class="mb-3 col-md-4">
				<label class="form-label">شماره دانشجویی:</label>
				<input type="number" value="@Model.Complaint.Complaining.StudentNumber.Value" class="form-control" id="complaint-studentNumber" readonly>
			</div>
			<div class="mb-3 col-md-4">
				<label class="form-label">کد ملی:</label>
				<input type="number" value="@Model.Complaint.Complaining.NationalCode.Value" class="form-control" readonly>
			</div>
			<div class="mb-3 col-md-4">
				<label class="form-label">نام پدر:</label>
				<input  asp-for="Complaint.Complaining.Father" class="form-control"  readonly>
			</div>
			<div class="mb-3 col-md-4">
				<label class="form-label">رشته تحصیلی:</label>
				<input asp-for="Complaint.Complaining.College" class="form-control"  readonly>
			</div>
			<div class="mb-3 col-md-4">
				<label class="form-label">مقطع تحصیلی:</label>
				<input  asp-for="Complaint.Complaining.Grade" class="form-control" id="complaint-grade" readonly>
			</div>
			<div class="mb-3 col-md-6">
				<label class="form-label">موضوع شکایت:</label>
				<input type="text" asp-for="Complaint.Title" class="form-control" readonly>
			</div>
		</div>
		<div class="mb-3">
			<label class="form-label">شرح شکایت:</label>
			<textarea class="form-control" asp-for="Complaint.Description" readonly rows="5"></textarea>
		</div>
	</div>
</section>

@if (Model?.Complaint.Documents != null && Model.Complaint.Documents.Count() > 0)
{

	<div>
		<h4 class="mt-4">مدارک:</h4>
		<div class="table-overflow">
			<div class="table ">
				<table class="table text-center" width="100%">
					<thead>
						<tr>
							<th>عنوان مدرک</th>
							<th>تاریخ ارسال</th>
							<th>عملیات</th>
						</tr>
					</thead>
					<tbody>
						@foreach (var item in Model.Complaint.Documents)
						{
							<tr>
								<td>@item.Name</td>
								<td>@item.SendTime.ToShamsi()</td>
								<td>
									<div class="table__action">
										<a class="btn btn--show mx-2" asp-action="Download" asp-route-fileName="@item.Name" asp-route-file="@item.File.Name">
											<i class="fa fa-download"></i>
										</a>
										
									</div>
								</td>
							</tr>
						}

					</tbody>
				</table>
			</div>
		</div>
	</div>
}
